{% extends 'base.html' %}

{% block content %}
{% if user.is_authenticated %}
        <div class="table-responsive">
          <div class="container">

            <table class="table table-striped">
                <hr>
                   <tr>
                        <th>Funcionario</th>
                        <th>Serviço</th>
                        <th>Data do serviço</th>
                        <th>Valor</th>
                        <th>Opções</th>
                   </tr>
                   {% for servico in object_list %}
                   <tr>
                        <td>{{ servico.funcionario }}</td>
                        <td>{{ servico.get_lista_servico_display }}</td>
                        <td>{{ servico.data_servico }}</td>
                        <td>R$ {{ servico.valor_servico }}</td>
                        <td><a href="{% url 'servico:editar-servico' servico.id %}" class="btn btn-secondary btn-sm">Editar</a>
                            <a href="" class="btn btn-danger btn-sm" onclick="return myFunction()">Excluir</a>
                        </td>

                        <script>
                                function myFunction() {
                                    if (window.confirm("Você tem certeza que deseja excluir ?")) {
                                        window.location.href="{% url 'servico:excluir-servico' servico.id %}";
                                    }
                                }
                        </script>

                   {% empty %}
                        <td>Não há serviços para esse cliente</td>
                   </tr>
                </hr>
                  {% endfor %}
            </table>

            <p><a class="btn btn-outline-primary" href="{% url 'servico:listar-clientes' %}">Voltar</a></p>

            <!---------Paginação------------>
              <div class="text-xs-center">
                <nav aria-label="Page navigation example">
                  <ul class="pagination pagination-sm">
                    {% if page_obj.has_previous %}
                     <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Anterior</a></li>
                    {% endif %}

                    {% for i in page_obj.paginator.page_range %}
                     {% if page_obj.has_next %}
                          {% if page_obj.number == i %}
                            <li class="page-item disabled"><a class="page-link" href="#">{{ i }} </a></li>
                          {% else %}
                            <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                          {% endif %}
                     {% endif %}
                    {% endfor %}

                    {% if page_obj.has_next %}
                      <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Próximo</a></li>
                    {% endif %}
                  </ul>
                </nav>
              </div>
          </div>
        </div>

{% else %}
    <p>Você não está logado</p>
    <a href="{% url 'login' %}">Entrar</a>
    {% endif %}
{% endblock %}
